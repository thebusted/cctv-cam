# Face Recognition Service Configuration

# Service
SERVICE_NAME=face-recognition-service
HOST=0.0.0.0
PORT=8003
DEBUG=False

# Camera Configuration
RTSP_URL=rtsp://username:password@camera-ip:554/stream1
CAMERA_ID=camera_01
CAMERA_RESOLUTION=3264x1840
CAMERA_FPS=29.970030

# Face Detection Settings
FACE_DETECTION_MODEL=yolov8n-face.pt
PERSON_DETECTION_MODEL=yolo11n.pt
FACE_CONFIDENCE_THRESHOLD=0.5
PERSON_CONFIDENCE_THRESHOLD=0.6

# Face Recognition Settings
FACE_RECOGNITION_MODEL=buffalo_l
SIMILARITY_THRESHOLD=0.35
VOTING_THRESHOLD=0.60
MIN_FACE_SIZE=80
EMBEDDING_DIM=512

# Multi-frame Verification
VERIFICATION_FRAMES=3
VERIFICATION_INTERVAL=1.0

# Processing Settings
PROCESS_EVERY_N_FRAMES=30
DETECTION_EVERY_N_FRAMES=1
FRAME_BUFFER_SIZE=2
RECONNECT_DELAY=30
MAX_RECONNECT_DELAY=300

# Redis Configuration
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=

# Redis Streams
FACE_EVENTS_STREAM=stream:face_events
PERSON_COUNT_STREAM=stream:person_count
VIDEO_FRAMES_STREAM=stream:video_frames
BUFFER_STREAM=buffer:face_events
MAX_BUFFER_SIZE=10000

# Redis Pub/Sub
ALERTS_CHANNEL=alerts
FACE_DETECTION_CHANNEL=face_detected

# Database Configuration
DB_HOST=timescaledb
DB_PORT=5432
DB_NAME=cctv_db
DB_USER=postgres
DB_PASSWORD=postgres
DB_POOL_MIN_SIZE=5
DB_POOL_MAX_SIZE=20

# Monitoring
METRICS_PORT=9003
LOG_LEVEL=INFO
